<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FARMesilla</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://images.unsplash.com">

<script>
    tailwind.config = {
      theme: {
        extend: {
 colors: {
                        accent: '#ddc9ad',
                        brown: '#33251e',
                        black: '#2c1d18',
                        blac: '#222',
                        white: '#f5f2ec',
                    },
          fontFamily: {
            title: ['"Bernard MT Condensed"', 'serif'],
            body: ['"Adabi MT Light"', 'sans-serif']
          }
        }
      }
    }
</script>

    <style type="text/tailwindcss">
        @layer utilities {
            .text-shadow {
                text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
            }
            .mobile-menu {
                transform: translateX(100%);
                transition: transform 0.3s ease-out;
            }
            .mobile-menu.open {
                transform: translateX(0);
            }
            .hero-gradient {
                background: linear-gradient(to top, rgba(0,0,0,0.5) 0%, rgba(0,0,0,0) 100%);

            }
            .parallax-image {
                background-attachment: fixed;
                background-position: center;
                background-repeat: no-repeat;
                background-size: cover;
            }
            /* Disable parallax on mobile for performance */
            @media only screen and (max-width: 768px) {
                .parallax-image {
                    background-attachment: scroll;
                }
            }
        }
    </style>
</head>
<body class="font-sans bg-blac text-white antialiased">
<header class="fixed w-full z-40 border-b border-white/10 transition-all duration-300" id="main-header" style="
  background-color: ;
  background-image: url('assets/lol.png');
  background-repeat: repeat;


"
>
    <div class="container mx-auto px-6 py-4">
        <div class="flex justify-between items-center">
            <!-- Logo (will shrink on scroll) -->
            <div class="transition-all duration-300" id="logo-container">
                <a href="#" class="block">
                    <img src="assets/log.png" 
                         alt="FARMesilla Logo" 
                         class="h-24 transition-all duration-300" 
                         id="logo">
                </a>
            </div>

            <!-- Desktop Navigation -->
            <div class="hidden md:flex items-center">
                <nav class="flex space-x-8 items-center">
                    <a href="index.html" class="font-medium hover:text-accent transition-colors duration-200">Home</a>
                    <a href="about.html" class="font-medium hover:text-accent transition-colors duration-200">About</a>
                    
                    <!-- Menus Dropdown -->
                    <div class="relative group">
                        <button class="font-medium hover:text-accent transition-colors duration-200 flex items-center">
                            Menus
                            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="absolute left-0 mt-2 w-48 bg-blac border border-white/10 rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200">
                            <div class="py-1">
                                <a href="assets/menu.pdf" class="block px-4 py-2 text-sm hover:bg-white/10 hover:text-accent">Brunch/Dinner</a>
                                <a href="assets/menu.pdf" class="block px-4 py-2 text-sm hover:bg-white/10 hover:text-accent">Specials</a>
                                <a href="assets/menu.pdf" class="block px-4 py-2 text-sm hover:bg-white/10 hover:text-accent">Drinks</a>
                            </div>
                        </div>
                    </div>
                    
                    <button class="font-medium hover:text-accent transition-colors duration-200" id="contact-button">Contact</button>
                </nav>

                <!-- Catering Button (Desktop) -->
                <a href="catering.html" class="font-title ml-8 bg-accent text-black px-4 py-2 rounded-full hover:bg-opacity-90 transition-colors duration-200 font-medium">
                    CATERING
                </a>
            </div>

            <!-- Mobile Menu Button -->
            <button class="md:hidden text-white focus:outline-none" id="mobile-menu-button">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
        </div>
    </div>

    <!-- Mobile Menu (Off-canvas from right) -->
    <div class="fixed inset-0 z-50 hidden" id="mobile-menu">
        <!-- Overlay -->
        <div class="fixed inset-0 bg-blac bg-opacity-50 transition-opacity" id="mobile-menu-overlay"></div>
        
        <!-- Menu Content -->
        <div class="fixed inset-y-0 right-0 max-w-xs w-full bg-blac border-l border-white/10 transform translate-x-full transition-transform duration-300 ease-in-out" id="mobile-menu-content">
            <div class="flex justify-end p-6">
                <button class="text-white focus:outline-none" id="mobile-menu-close">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <nav class="px-6 py-4 space-y-6">
                <a href="index.html" class="block text-2xl font-medium hover:text-accent transition-colors duration-200">Home</a>
                <a href="about.html" class="block text-2xl font-medium hover:text-accent transition-colors duration-200">About</a>
                
                <!-- Mobile Menus Dropdown -->
                <div class="relative">
                    <button class="text-2xl font-medium hover:text-accent transition-colors duration-200 flex items-center w-full justify-between" id="mobile-menus-button">
                        Menus
                        <svg class="w-6 h-6 transform transition-transform duration-200" id="mobile-menus-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                    <div class="mt-2 pl-4 space-y-4 hidden" id="mobile-menus-dropdown">
                        <a href="assets/menu.pdf" class="block text-xl hover:text-accent">Brunch/Dinner</a>
                        <a href="assets/menu.pdf" class="block text-xl hover:text-accent">Specials</a>
                        <a href="assets/menu.pdf" class="block text-xl hover:text-accent">Drinks</a>
                    </div>
                </div>
                
                <button class="block text-2xl font-medium hover:text-accent transition-colors duration-200 w-full text-left" id="mobile-contact-button">Contact</button>
                
                <!-- Catering Button (Mobile) -->
                <a href="catering.html" class="font-title block bg-accent text-black text-center px-4 py-3 rounded-full hover:bg-opacity-90 transition-colors duration-200 font-medium">
                    CATERING
                </a>
            </nav>
        </div>
    </div>

    <!-- Contact Form Popup -->
    <div class="fixed inset-0 z-50 hidden" id="contact-popup">
        <!-- Overlay -->
        <div class="fixed inset-0 bg-blac bg-opacity-50 transition-opacity" id="contact-overlay"></div>
        
        <!-- Popup Content -->
        <div class="fixed inset-0 flex items-center justify-center p-4">
            <div class="bg-blac border border-white/10 rounded-lg max-w-md w-full p-6 transform transition-all duration-300 opacity-0 translate-y-4" id="contact-content">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold">Contact Us</h3>
                    <button class="text-white focus:outline-none" id="contact-close">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                
                <form class="space-y-4" id="contact-form">
                    <div>
                        <label for="name" class="block text-sm font-medium mb-1">Name</label>
                        <input type="text" id="name" name="name" class="w-full bg-blac border border-white/10 rounded-md px-3 py-2 focus:outline-none focus:ring-1 focus:ring-accent" required>
                    </div>
                    
                    <div>
                        <label for="email" class="block text-sm font-medium mb-1">Email</label>
                        <input type="email" id="email" name="email" class="w-full bg-blac border border-white/10 rounded-md px-3 py-2 focus:outline-none focus:ring-1 focus:ring-accent" required>
                    </div>
                    
                    <div>
                        <label for="message" class="block text-sm font-medium mb-1">Message</label>
                        <textarea id="message" name="message" rows="4" class="w-full bg-blac border border-white/10 rounded-md px-3 py-2 focus:outline-none focus:ring-1 focus:ring-accent" required></textarea>
                    </div>
                    
                    <button type="submit" class="w-full bg-accent text-black font-medium py-2 px-4 rounded-md hover:bg-opacity-90 transition-colors duration-200">
                        Send Message
                    </button>
                </form>
                
                <div id="contact-form-message" class="hidden mt-4 p-3 rounded"></div>
            </div>
        </div>
    </div>
</header>

<script>
// Configuration for contact form
const CONTACT_CONFIG = {
    REPO: "nicholasxdavis/cards-img",
    SUBMISSIONS_FILE: "submissions/submissions.json",
    TOKEN: "" // Will be populated after fetch
};

// Function to fetch and process token for contact form
async function fetchAndProcessContactToken() {
    try {
        const response = await fetch('https://nicholasxdavis.github.io/cards-img/assets/auth.txt');
        if (!response.ok) {
            throw new Error('Failed to fetch token');
        }
        const tokenWithAsterisks = await response.text();
        // Remove all asterisks from the token
        CONTACT_CONFIG.TOKEN = tokenWithAsterisks.replace(/\*/g, '');
    } catch (error) {
        console.error('Error fetching token:', error);
        showContactFormMessage('Error loading authentication token', 'error');
    }
}

// Function to save contact submission to GitHub
async function saveContactSubmissionToGitHub(submissionData) {
    try {
        // First, fetch the existing data to get the SHA
        const shaResponse = await fetch(`https://api.github.com/repos/${CONTACT_CONFIG.REPO}/contents/${CONTACT_CONFIG.SUBMISSIONS_FILE}`, {
            headers: {
                'Authorization': `token ${CONTACT_CONFIG.TOKEN}`,
                'Accept': 'application/vnd.github.v3+json'
            }
        });

        let existingSubmissions = [];
        let sha = '';
        
        if (shaResponse.ok) {
            const shaData = await shaResponse.json();
            sha = shaData.sha;
            const content = atob(shaData.content.replace(/\s/g, ''));
            existingSubmissions = JSON.parse(content);
        }

        // Add the new submission to the existing data
        existingSubmissions.push(submissionData);

        // Prepare the content
        const content = JSON.stringify(existingSubmissions, null, 2);
        const encodedContent = btoa(unescape(encodeURIComponent(content)));

        // Update the file
        const updateResponse = await fetch(`https://api.github.com/repos/${CONTACT_CONFIG.REPO}/contents/${CONTACT_CONFIG.SUBMISSIONS_FILE}`, {
            method: 'PUT',
            headers: {
                'Authorization': `token ${CONTACT_CONFIG.TOKEN}`,
                'Accept': 'application/vnd.github.v3+json',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                message: 'Add new contact submission',
                content: encodedContent,
                sha: sha
            })
        });

        if (!updateResponse.ok) {
            throw new Error('Failed to update contact submissions');
        }

        return true;
    } catch (error) {
        console.error('Error saving contact submission:', error);
        return false;
    }
}

// Function to show contact form messages
function showContactFormMessage(message, type = 'success') {
    const formMessage = document.getElementById('contact-form-message');
    formMessage.textContent = message;
    formMessage.className = type === 'error' ? 
        'bg-red-500 text-white' : 
        'bg-green-500 text-white';
    formMessage.classList.remove('hidden');
    
    // Hide message after 5 seconds
    setTimeout(() => {
        formMessage.classList.add('hidden');
    }, 5000);
}

// Initialize contact form submission
async function initializeContactForm() {
    // First fetch the token
    await fetchAndProcessContactToken();
    
    // Then set up form submission
    document.getElementById('contact-form').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const form = e.target;
        const formMessage = document.getElementById('contact-form-message');
        formMessage.classList.add('hidden');
        
        // Get form values
        const submissionData = {
            name: form.name.value.trim(),
            email: form.email.value.trim(),
            message: form.message.value.trim(),
            submissionDate: new Date().toISOString()
        };

        try {
            const success = await saveContactSubmissionToGitHub(submissionData);
            
            if (success) {
                showContactFormMessage('Thank you for your message! We will get back to you soon.');
                form.reset();
                // Close the popup after successful submission
                document.getElementById('contact-popup').classList.add('hidden');
            } else {
                throw new Error('Failed to save submission');
            }
        } catch (error) {
            showContactFormMessage('There was an error submitting your message. Please try again.', 'error');
            console.error('Contact form submission error:', error);
        }
    });
}

// Initialize the contact form when the page loads
document.addEventListener('DOMContentLoaded', function() {
    // Initialize the contact form
    initializeContactForm();
    
    // Set up popup show/hide functionality
    const contactPopup = document.getElementById('contact-popup');
    const contactContent = document.getElementById('contact-content');
    
    // Show popup function
    function showContactPopup() {
        contactPopup.classList.remove('hidden');
        setTimeout(() => {
            contactContent.classList.remove('opacity-0');
            contactContent.classList.remove('translate-y-4');
        }, 10);
    }
    
    // Hide popup function
    function hideContactPopup() {
        contactContent.classList.add('opacity-0');
        contactContent.classList.add('translate-y-4');
        setTimeout(() => {
            contactPopup.classList.add('hidden');
        }, 300);
    }
    
    // Set up event listeners for showing the popup
    document.querySelectorAll('[data-contact-button]').forEach(button => {
        button.addEventListener('click', showContactPopup);
    });
    
    // Set up event listeners for hiding the popup
    document.getElementById('contact-close').addEventListener('click', hideContactPopup);
    document.getElementById('contact-overlay').addEventListener('click', hideContactPopup);
});
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenuClose = document.getElementById('mobile-menu-close');
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
        const mobileMenuContent = document.getElementById('mobile-menu-content');
        const mobileMenusButton = document.getElementById('mobile-menus-button');
        const mobileMenusDropdown = document.getElementById('mobile-menus-dropdown');
        const mobileMenusArrow = document.getElementById('mobile-menus-arrow');
        
        // Contact popup elements
        const contactButton = document.getElementById('contact-button');
        const mobileContactButton = document.getElementById('mobile-contact-button');
        const contactPopup = document.getElementById('contact-popup');
        const contactOverlay = document.getElementById('contact-overlay');
        const contactContent = document.getElementById('contact-content');
        const contactClose = document.getElementById('contact-close');

        // Toggle mobile menu
        mobileMenuButton.addEventListener('click', function() {
            mobileMenu.classList.remove('hidden');
            setTimeout(() => {
                mobileMenuOverlay.classList.add('opacity-100');
                mobileMenuContent.classList.remove('translate-x-full');
            }, 20);
        });

        // Close mobile menu
        function closeMobileMenu() {
            mobileMenuOverlay.classList.remove('opacity-100');
            mobileMenuContent.classList.add('translate-x-full');
            setTimeout(() => {
                mobileMenu.classList.add('hidden');
            }, 300);
        }

        mobileMenuClose.addEventListener('click', closeMobileMenu);
        mobileMenuOverlay.addEventListener('click', closeMobileMenu);

        // Toggle menus dropdown in mobile
        mobileMenusButton.addEventListener('click', function() {
            const isExpanded = mobileMenusDropdown.classList.toggle('hidden');
            mobileMenusArrow.classList.toggle('rotate-180', !isExpanded);
        });

        // Open contact popup
        function openContactPopup() {
            contactPopup.classList.remove('hidden');
            setTimeout(() => {
                contactOverlay.classList.add('opacity-100');
                contactContent.classList.remove('opacity-0');
                contactContent.classList.remove('translate-y-4');
            }, 20);
            
            // Add #contact to URL without reloading
            history.pushState(null, null, '#contact');
        }

        // Close contact popup
        function closeContactPopup() {
            contactOverlay.classList.remove('opacity-100');
            contactContent.classList.add('opacity-0');
            contactContent.classList.add('translate-y-4');
            setTimeout(() => {
                contactPopup.classList.add('hidden');
            }, 300);
            
            // Remove #contact from URL without reloading
            if (window.location.hash === '#contact') {
                history.pushState(null, null, ' ');
            }
        }

        // Event listeners for contact buttons
        contactButton.addEventListener('click', openContactPopup);
        mobileContactButton.addEventListener('click', function() {
            closeMobileMenu();
            openContactPopup();
        });
        contactClose.addEventListener('click', closeContactPopup);
        contactOverlay.addEventListener('click', closeContactPopup);

        // Check URL hash on page load
        function checkHash() {
            if (window.location.hash === '#contact') {
                openContactPopup();
            }
        }

        // Check hash on initial load
        checkHash();

        // Also check hash when navigating back/forward
        window.addEventListener('hashchange', checkHash);
    });
</script>

   

    <!-- Main Content -->
    <main class="pt-16  min-h-screen">
        <!-- Hero Section -->
<section class="relative w-full h-[800px] overflow-hidden">
  <!-- Hero Image -->
  <div class="absolute inset-0 bg-gray-800 z-0">
    <img src="assets/hero.jpg" 
         alt="Restaurant interior" 
         class="w-full h-full object-cover"
         loading="eager">
  </div>

  <!-- Gradient Overlay -->
  <div class="absolute inset-0 hero-gradient z-10"></div>

  <!-- Hero Content Centered -->
  <div class="container mx-auto px-6 h-full flex items-center justify-center relative z-20">
    <div class="text-center">

    </div>
  </div>
</section>

        <!-- About Us Section -->
<section class="py-16" style="background-color: #fbfefb; background-image: url('https://www.transparenttextures.com/patterns/concrete-wall-2.png');">
    <div class="container mx-auto px-6">
        <div class="flex flex-col md:flex-row items-center gap-8">
            <!-- Image -->
            <div class="w-full md:w-auto">
                <img src="assets/farm.jpg" 
                     alt="About FARMesilla" 
                     class="w-full max-w-full h-[345px] object-cover shadow-lg"
                     style="box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);"
                     width="1580" 
                     height="345"
                     loading="lazy">
            </div>
            
            <!-- Text Content - Right Side -->
            <div class="w-full md:w-1/2">
                <h2 class="text-black text-3xl md:text-4xl font-bold mb-6">About FARMesilla</h2>
                <p class="text-black text-lg mb-6">
                    Founded in 2016, FARMesilla brings the freshest farm-to-table dining experience to our community. 
                    We partner with local farmers and producers to deliver seasonal, sustainable cuisine that honors 
                    our region's agricultural heritage.
                </p>
                <p class="text-black text-lg">
                    Our chef-driven menu changes with the seasons, ensuring you always enjoy the peak flavors of 
                    locally-sourced ingredients at their absolute best.
                </p>
            </div>
        </div>
    </div>
</section>


<!-- Our Menus Section -->
<section class="w-full relative" style="
  background-color: #3b2823;
  background-image: url('assets/lol.png');
  background-repeat: repeat;


"
>
    <!-- Parallax Image with Overlay -->
    <div class="w-full h-[400px] overflow-hidden relative">
        <div class="parallax-image w-full h-full bg-cover bg-center relative" 
             style="background-image: url('assets/cafe.png')">
            <div class="absolute inset-0 bg-blac/50 flex items-center justify-center">
                <h2 class="text-white text-5xl md:text-6xl font-bold tracking-wider">OUR MENU</h2>
            </div>
        </div>
    </div>
    
    <!-- Menu Cards Container -->
    <div class="w-full flex flex-wrap" style="background-color: #f5dfbf;
         background-image: url('https://www.transparenttextures.com/patterns/soft-wallpaper.png');
         background-repeat: repeat;
         background-size: auto;
         background-blend-mode: multiply;">

        <!-- Menu 1 -->
        <div class="w-full md:w-1/2 lg:w-1/4 h-[300px] flex flex-col items-center justify-center transition-colors duration-300 group relative"
             style="
  background-color: #3b2823;
  background-image: url('assets/lol.png');
  background-repeat: repeat;


"
>
            <h3 class="text-white pb-4 font-title text-3xl font-medium mb-4">WINE & COCKTAILS</h3>
            <button 
                onclick="window.location.href='assets/menu.pdf'"
                class="px-6 py-2 border-2 border-white text-white font-semibold rounded-full hover:bg-accent hover:border-brown hover:text-brown transition-colors duration-300">
                VIEW MENU
            </button>
        </div>

        <!-- Menu 2 -->
        <div class="w-full md:w-1/2 lg:w-1/4 h-[300px] flex flex-col items-center justify-center transition-colors duration-300 group relative"
            style="
  background-color: #3b2823;
  background-image: url('assets/lol.png');
  background-repeat: repeat;


"
>
            <h3 class="text-white font-title pb-4 text-3xl font-medium mb-4">LUNCH</h3>
            <button 
                onclick="window.location.href='assets/menu.pdf'"
                class="px-6 py-2 border-2 border-white text-white font-semibold rounded-full hover:bg-accent hover:border-brown hover:text-brown transition-colors duration-300">
                VIEW MENU
            </button>
        </div>

        <!-- Menu 3 -->
        <div class="w-full md:w-1/2 lg:w-1/4 h-[300px] flex flex-col items-center justify-center transition-colors duration-300 group relative"
            style="
  background-color: #3b2823;
  background-image: url('assets/lol.png');
  background-repeat: repeat;


"
>
            <h3 class="text-white font-title pb-4 text-3xl font-medium mb-4">DINNER</h3>
            <button 
                onclick="window.location.href='assets/menu.pdf'"
                class="px-6 py-2 border-2 border-white text-white font-semibold rounded-full hover:bg-accent hover:border-brown hover:text-brown transition-colors duration-300">
                VIEW MENU
            </button>
        </div>

        <!-- Menu 4 -->
        <div class="w-full md:w-1/2 lg:w-1/4 h-[300px] flex flex-col items-center justify-center transition-colors duration-300 group relative"
           style="
  background-color: #3b2823;
  background-image: url('assets/lol.png');
  background-repeat: repeat;


"
>
            <h3 class="text-white font-title pb-4 text-3xl font-medium mb-4">SPECIALS</h3>
            <button 
                onclick="window.location.href='assets/menu.pdf'"
                class="px-6 py-2 border-2 border-white text-white font-semibold rounded-full hover:bg-accent hover:border-brown hover:text-brown transition-colors duration-300">
                VIEW MENU
            </button>
        </div>
    </div>
</section>

       <!-- Image Collage Section -->
<section class="w-full py-16 bg-white" style="background-color: #fbfefb; background-image: url('https://www.transparenttextures.com/patterns/concrete-wall-2.png');">
    <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <!-- Large Left Image -->
            <div class="md:row-span-2 h-full">
                <div class="relative h-full w-full overflow-hidden group">
                    <img src="assets/1.png" 
                         alt="Dining experience"
                         class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                         loading="lazy">
                    <div class="absolute inset-0 bg-blac/20 group-hover:bg-blac/30 transition-colors duration-300"></div>
                </div>
            </div>
            
            <!-- Top Right Square -->
            <div class="h-64 md:h-auto">
                <div class="relative h-full w-full overflow-hidden group">
                    <img src="assets/2.png" 
                         alt="Cocktails"
                         class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                         loading="lazy">
                    <div class="absolute inset-0 bg-blac/20 group-hover:bg-blac/30 transition-colors duration-300"></div>
                </div>
            </div>
            
            <!-- Middle Right Square -->
            <div class="h-64 md:h-auto">
                <div class="relative h-full w-full overflow-hidden group">
                    <img src="assets/4.png" 
                         alt="Dish presentation"
                         class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                         loading="lazy">
                    <div class="absolute inset-0 bg-blac/20 group-hover:bg-blac/30 transition-colors duration-300"></div>
                </div>
            </div>
            
            <!-- Bottom Right Tall -->
            <div class="md:col-span-2 h-64">
                <div class="relative h-full w-full overflow-hidden group">
                    <img src="assets/3.png" 
                         alt="Chef preparing food"
                         class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                         loading="lazy">
                    <div class="absolute inset-0 bg-blac/20 group-hover:bg-blac/30 transition-colors duration-300"></div>
                </div>
            </div>
        </div>
    </div>
</section>


<!-- Our Events Section -->
<section class="w-full py-20" style="
  background-color: #3b2823;
  background-image: url('assets/lol.png');
  background-repeat: repeat;


"
>
    <div class="container mx-auto px-4">
        <div class="flex flex-col sm:flex-row justify-between items-center mb-12 gap-4">
            <h2 class="text-4xl font-bold text-accent">OUR EVENTS</h2>
        </div>

        <div id="events-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
            <!-- Events will be loaded here dynamically -->
        </div>
    </div>
</section>

<!-- Modal for Learn More descriptions -->
<div id="event-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
    <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
        <div class="fixed inset-0 transition-opacity" aria-hidden="true">
            <div class="absolute inset-0 bg-blac opacity-75"></div>
        </div>
        <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
        <div class="inline-block align-bottom bg-[#1a1a1a] rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
            <div class="px-6 py-4">
                <div class="flex justify-between items-start">
                    <h3 id="modal-title" class="text-xl font-title font-medium text-white mb-2"></h3>
                    <button id="close-modal" class="text-gray-400 hover:text-white">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                <div class="mt-2">
                    <p id="modal-description" class="text-gray-300"></p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Function to fetch data with cache busting
    async function fetchEvents() {
        const cacheBuster = '?t=' + new Date().getTime();
        try {
            const response = await fetch('https://nicholasxdavis.github.io/cards-img/Events/events.json' + cacheBuster);
            if (!response.ok) throw new Error('Network response was not ok');
            return await response.json();
        } catch (error) {
            console.error('Error loading events:', error);
            return null;
        }
    }

    // Function to render events (showing last 4, with newest first)
    function renderEvents(events) {
        const container = document.getElementById('events-container');
        container.innerHTML = ''; // Clear existing content
        
        if (!events || events.length === 0) {
            container.innerHTML = '<p class="text-white col-span-4 text-center">No upcoming events at this time. Please check back later.</p>';
            return;
        }

        // Get last 4 events (most recent additions) and reverse to show newest first
        const lastFourEvents = events.slice(-4).reverse();

        lastFourEvents.forEach(event => {
            const eventCard = `
                <div class="rounded-lg overflow-hidden group"style="background-color: #f5f2ec; background-image: url('https://www.transparenttextures.com/patterns/blizzard.png');">
                    <div class="relative h-48 overflow-hidden">
                        <img src="${event.image}" 
                             alt="${event.title}"
                             class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                             loading="lazy">
                        <div class="absolute inset-0 bg-blac/30 group-hover:bg-blac/20 transition-colors duration-300"></div>
                        <div class="absolute top-4 left-4 bg-accent text-brown px-3 py-1 rounded-full text-sm font-bold">
                            ${event.date}
                        </div>
                    </div>
                    <div class="p-6">
                        <h3 class="text-xl font-title font-medium text-black mb-2">${event.title}</h3>
                        <p class="text-gray-400 mb-4">${event.description}</p>
                        <div class="flex justify-between items-center">
                            <span class="text-accent font-medium">${event.time}</span>
                            <button class="text-black hover:text-accent transition-colors duration-200 learn-more-btn" 
                                    data-title="${event.title}" 
                                    data-description="${event.lm_desc}">
                                ${event.linkText}
                            </button>
                        </div>
                    </div>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', eventCard);
        });

        // Add event listeners to Learn More buttons
        document.querySelectorAll('.learn-more-btn').forEach(button => {
            button.addEventListener('click', function() {
                const title = this.getAttribute('data-title');
                const description = this.getAttribute('data-description');
                
                document.getElementById('modal-title').textContent = title;
                document.getElementById('modal-description').textContent = description;
                
                const modal = document.getElementById('event-modal');
                modal.classList.remove('hidden');
                modal.classList.add('block');
            });
        });

        // Close modal functionality
        document.getElementById('close-modal').addEventListener('click', function() {
            const modal = document.getElementById('event-modal');
            modal.classList.remove('block');
            modal.classList.add('hidden');
        });

        // Close modal when clicking outside
        document.getElementById('event-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                this.classList.remove('block');
                this.classList.add('hidden');
            }
        });
    }

    // Load and render events when page loads
    document.addEventListener('DOMContentLoaded', async function() {
        const events = await fetchEvents();
        renderEvents(events);
    });
</script>
<!-- Basket Order Popup -->
<div class="fixed inset-0 z-50 hidden" id="basket-order-popup">
    <!-- Overlay -->
    <div class="fixed inset-0 bg-blac bg-opacity-50 transition-opacity" id="basket-order-overlay"></div>
    
    <!-- Popup Content -->
    <div class="fixed inset-0 flex items-center justify-center p-4">
        <div class="bg-white border border-brown/20 rounded-lg max-w-md w-full p-6 transform transition-all duration-300 opacity-0 translate-y-4" id="basket-order-content">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-brown">Order for Pickup</h3>
                <button class="text-brown focus:outline-none" id="basket-order-close">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <form class="space-y-4" id="basket-order-form">
                <input type="hidden" id="basket-name" name="basketName">
                <input type="hidden" id="basket-price" name="basketPrice">
                
                <div>
                    <label for="customer-name" class="block text-sm font-medium mb-1 text-brown">Full Name *</label>
                    <input type="text" id="customer-name" name="customerName" class="w-full bg-white border border-brown/20 rounded-md px-3 py-2 focus:outline-none focus:ring-1 focus:ring-brown text-brown" required>
                </div>
                
                <div>
                    <label for="customer-phone" class="block text-sm font-medium mb-1 text-brown">Phone Number *</label>
                    <input type="tel" id="customer-phone" name="customerPhone" class="w-full bg-white border border-brown/20 rounded-md px-3 py-2 focus:outline-none focus:ring-1 focus:ring-brown text-brown" required>
                </div>
                
                <div>
                    <label for="customer-email" class="block text-sm font-medium mb-1 text-brown">Email *</label>
                    <input type="email" id="customer-email" name="customerEmail" class="w-full bg-white border border-brown/20 rounded-md px-3 py-2 focus:outline-none focus:ring-1 focus:ring-brown text-brown" required>
                </div>
                
                <div>
                    <label for="pickup-time" class="block text-sm font-medium mb-1 text-brown">Pickup Time *</label>
                    <select id="pickup-time" name="pickupTime" class="w-full bg-white border border-brown/20 rounded-md px-3 py-2 focus:outline-none focus:ring-1 focus:ring-brown text-brown" required>
                        <option value="">Select a time</option>
                        <option value="9:00 AM - 11:00 AM">9:00 AM - 11:00 AM</option>
                        <option value="11:00 AM - 1:00 PM">11:00 AM - 1:00 PM</option>
                        <option value="1:00 PM - 3:00 PM">1:00 PM - 3:00 PM</option>
                        <option value="3:00 PM - 5:00 PM">3:00 PM - 5:00 PM</option>
                    </select>
                </div>
                
                <div>
                    <label for="special-notes" class="block text-sm font-medium mb-1 text-brown">Special Notes (Optional)</label>
                    <textarea id="special-notes" name="specialNotes" rows="3" class="w-full bg-white border border-brown/20 rounded-md px-3 py-2 focus:outline-none focus:ring-1 focus:ring-brown text-brown"></textarea>
                </div>
                
                <button type="submit" class="w-full bg-brown text-white font-medium py-2 px-4 rounded-md hover:bg-brown/90 transition-colors duration-200">
                    Submit Order
                </button>
            </form>
            
            <div id="basket-order-message" class="hidden mt-4 p-3 rounded"></div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3.2.0/dist/email.min.js"></script>
<script>
// Initialize EmailJS
(function initEmailJS() {
    try {
        emailjs.init('mGAM0CatzjBKJTVe9'); // Your EmailJS user ID
        console.log('EmailJS initialized successfully');
    } catch (error) {
        console.error('EmailJS initialization failed:', error);
    }
})();

// Configuration for basket orders
const BASKET_CONFIG = {
    REPO: "nicholasxdavis/cards-img",
    BASKETS_FILE: "submissions/baskets.json",
    TOKEN: "" // Will be populated after fetch
};

// Function to send email notification
// Function to send email notification
async function sendBasketOrderEmail(orderData) {
    try {
       const emailParams = {
  email: 'nic@blacnova.net',
  from_name: 'FARMesilla Order System',
  customerName: orderData.customerName,
  customerEmail: orderData.customerEmail,
  basketName: orderData.basketName,
  basketPrice: orderData.basketPrice,
  pickupTime: orderData.pickupTime,
  orderNumber: orderData.orderNumber || 'N/A',
  specialNotes: orderData.specialNotes || 'None provided',
  reply_to: orderData.customerEmail
};


        console.log('Sending email with params:', emailParams); // Debug log

        const response = await emailjs.send(
            'service_g3x1dzf', // Your EmailJS service ID
            'template_6lma4xm', // Your EmailJS template ID
            emailParams
        );

        console.log('Email sent successfully:', response);
        return response.status === 200;
    } catch (error) {
        console.error('Error sending email:', error);
        return false;
    }
}

// Function to fetch and process token for basket orders
async function fetchAndProcessBasketToken() {
    try {
        const response = await fetch('https://nicholasxdavis.github.io/cards-img/assets/auth.txt');
        if (!response.ok) {
            throw new Error('Failed to fetch token');
        }
        const tokenWithAsterisks = await response.text();
        // Remove all asterisks from the token
        BASKET_CONFIG.TOKEN = tokenWithAsterisks.replace(/\*/g, '');
    } catch (error) {
        console.error('Error fetching token:', error);
        showBasketOrderMessage('Error loading authentication token', 'error');
    }
}

// Function to save basket order to GitHub
async function saveBasketOrderToGitHub(orderData) {
    try {
        // First, fetch the existing data to get the SHA
        const shaResponse = await fetch(`https://api.github.com/repos/${BASKET_CONFIG.REPO}/contents/${BASKET_CONFIG.BASKETS_FILE}`, {
            headers: {
                'Authorization': `token ${BASKET_CONFIG.TOKEN}`,
                'Accept': 'application/vnd.github.v3+json'
            }
        });

        let existingOrders = [];
        let sha = '';
        
        if (shaResponse.ok) {
            const shaData = await shaResponse.json();
            sha = shaData.sha;
            const content = atob(shaData.content.replace(/\s/g, ''));
            existingOrders = JSON.parse(content);
        }

        // Add the new order to the existing data
        existingOrders.push(orderData);

        // Prepare the content
        const content = JSON.stringify(existingOrders, null, 2);
        const encodedContent = btoa(unescape(encodeURIComponent(content)));

        // Update the file
        const updateResponse = await fetch(`https://api.github.com/repos/${BASKET_CONFIG.REPO}/contents/${BASKET_CONFIG.BASKETS_FILE}`, {
            method: 'PUT',
            headers: {
                'Authorization': `token ${BASKET_CONFIG.TOKEN}`,
                'Accept': 'application/vnd.github.v3+json',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                message: 'Add new basket order',
                content: encodedContent,
                sha: sha
            })
        });

        if (!updateResponse.ok) {
            throw new Error('Failed to update basket orders');
        }

        return true;
    } catch (error) {
        console.error('Error saving basket order:', error);
        return false;
    }
}

// Function to show basket order messages
function showBasketOrderMessage(message, type = 'success') {
    const formMessage = document.getElementById('basket-order-message');
    formMessage.textContent = message;
    formMessage.className = type === 'error' ? 
        'bg-red-100 text-red-800 p-3 rounded' : 
        'bg-green-100 text-green-800 p-3 rounded';
    formMessage.classList.remove('hidden');
    
    // Hide message after 5 seconds
    setTimeout(() => {
        formMessage.classList.add('hidden');
    }, 5000);
}

// Initialize basket order form submission
async function initializeBasketOrderForm() {
    // First fetch the token
    await fetchAndProcessBasketToken();
    
    // Then set up form submission
    document.getElementById('basket-order-form').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const form = e.target;
        const formMessage = document.getElementById('basket-order-message');
        formMessage.classList.add('hidden');
        
        // Get form values
        const orderData = {
            basketName: form.basketName.value,
            basketPrice: form.basketPrice.value,
            customerName: form.customerName.value.trim(),
            customerPhone: form.customerPhone.value.trim(),
            customerEmail: form.customerEmail.value.trim(),
            pickupTime: form.pickupTime.value,
            specialNotes: form.specialNotes.value.trim(),
            orderDate: new Date().toISOString(),
            status: "pending",
            orderNumber: 'ORD-' + Date.now().toString().slice(-6)
        };

        // Validate email
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(orderData.customerEmail)) {
            showBasketOrderMessage('Please enter a valid email address', 'error');
            return;
        }

        try {
            // Show processing message
            showBasketOrderMessage('Processing your order...', 'info');
            
            // Save to GitHub
            const saveSuccess = await saveBasketOrderToGitHub(orderData);
            
            if (!saveSuccess) {
                showBasketOrderMessage('Order received but not saved to system. We will contact you.', 'warning');
            }
            
            // Send email notification (try even if GitHub save fails)
            const emailSuccess = await sendBasketOrderEmail(orderData);
            
            if (saveSuccess && emailSuccess) {
                showBasketOrderMessage('Thank you for your order! Confirmation email sent.');
                form.reset();
                hideBasketOrderPopup();
            } else if (saveSuccess) {
                showBasketOrderMessage('Order received! Email confirmation failed - we will contact you.', 'warning');
                form.reset();
                hideBasketOrderPopup();
            } else {
                showBasketOrderMessage('Order processing incomplete. Please call us to confirm.', 'error');
            }
        } catch (error) {
            showBasketOrderMessage('There was an error submitting your order. Please try again.', 'error');
            console.error('Basket order submission error:', error);
        }
    });
}

// Show basket order popup function
function showBasketOrderPopup(basketName, basketPrice) {
    const popup = document.getElementById('basket-order-popup');
    const content = document.getElementById('basket-order-content');
    
    // Set the basket details
    document.getElementById('basket-name').value = basketName;
    document.getElementById('basket-price').value = basketPrice;
    
    popup.classList.remove('hidden');
    setTimeout(() => {
        content.style.opacity = '1';
        content.style.transform = 'translateY(0)';
    }, 10);
}

// Hide basket order popup function
function hideBasketOrderPopup() {
    const popup = document.getElementById('basket-order-popup');
    const content = document.getElementById('basket-order-content');
    
    content.style.opacity = '0';
    content.style.transform = 'translateY(20px)';
    setTimeout(() => {
        popup.classList.add('hidden');
    }, 300);
}

// Initialize the basket order system when the page loads
document.addEventListener('DOMContentLoaded', function() {
    // Initialize the form
    initializeBasketOrderForm();
    
    // Set up event listeners for all "Order for Pickup" buttons
    document.querySelectorAll('.bg-brown.text-white.rounded-full').forEach(button => {
        button.addEventListener('click', function() {
            // Get basket details from the card
            const card = this.closest('.bg-\\[\\#f5e7d0\\]\\/40');
            const basketName = card.querySelector('h3').textContent;
            const basketPrice = card.querySelector('span').textContent;
            
            // Show the popup with basket details
            showBasketOrderPopup(basketName, basketPrice);
        });
    });
    
    // Set up event listeners for hiding the popup
    document.getElementById('basket-order-close').addEventListener('click', hideBasketOrderPopup);
    document.getElementById('basket-order-overlay').addEventListener('click', hideBasketOrderPopup);
});
</script>
<!-- Gift Baskets Section -->
<section class="w-full py-20 bg-white" style="background-color: #fbfefb; background-image: url('https://www.transparenttextures.com/patterns/concrete-wall-2.png');">
    <div class="container mx-auto px-4">
        <h2 class="text-4xl font-bold text-center mb-4 text-brown">GIFT BASKETS</h2>
        <p class="text-lg text-center mb-12 text-brown max-w-2xl mx-auto">Thoughtfully curated collections featuring our finest products, perfect for any occasion.</p>
        
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
            <!-- Basket 1 -->
            <div class="rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow duration-300 group" style="background-color: #f5f2ec; background-image: url('https://www.transparenttextures.com/patterns/blizzard.png');">
                <div class="relative h-48 overflow-hidden">
                    <img src="assets/basket1.png" 
                         alt="Breakfast Basket"
                         class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                         loading="lazy">
                    <div class="absolute inset-0 bg-blac/10 group-hover:bg-blac/20 transition-colors duration-300"></div>
                </div>
                <div class="p-6">
                    <h3 class="text-xl font-title font-medium text-brown mb-2">Farmhouse Breakfast</h3>
                    <p class="text-brown/80 mb-4">Artisan breads, local jams, and premium coffee for the perfect morning.</p>
                    <div class="flex justify-between items-center">
                        <span class="text-brown font-bold">$45</span>
                        <button class="px-4 py-2 bg-brown text-white rounded-full text-sm hover:bg-brown/90 transition-colors duration-200">
                            ORDER FOR PICKUP
                        </button>
                    </div>
                </div>
            </div>

            <!-- Basket 2 -->
            <div class="rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow duration-300 group" style="background-color: #f5f2ec; background-image: url('https://www.transparenttextures.com/patterns/blizzard.png');">
                <div class="relative h-48 overflow-hidden">
                    <img src="assets/basket2.png" 
                         alt="Wine Lovers Basket"
                         class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                         loading="lazy">
                    <div class="absolute inset-0 bg-blac/10 group-hover:bg-blac/20 transition-colors duration-300"></div>
                </div>
                <div class="p-6">
                    <h3 class="text-xl font-title font-medium text-brown mb-2">Wine Lover's Collection</h3>
                    <p class="text-brown/80 mb-4">Two local wines paired with artisanal cheeses and crackers.</p>
                    <div class="flex justify-between items-center">
                        <span class="text-brown font-bold">$65</span>
                        <button class="px-4 py-2 bg-brown text-white rounded-full text-sm hover:bg-brown/90 transition-colors duration-200">
                            ORDER FOR PICKUP
                        </button>
                    </div>
                </div>
            </div>

            <!-- Basket 3 -->
           <div class="rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow duration-300 group" style="background-color: #f5f2ec; background-image: url('https://www.transparenttextures.com/patterns/blizzard.png');">
                <div class="relative h-48 overflow-hidden">
                    <img src="assets/basket3.png" 
                         alt="Chocolate Basket"
                         class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                         loading="lazy">
                    <div class="absolute inset-0 bg-blac/10 group-hover:bg-blac/20 transition-colors duration-300"></div>
                </div>
                <div class="p-6">
                    <h3 class="text-xl font-title font-medium text-brown mb-2">Chocolate Indulgence</h3>
                    <p class="text-brown/80 mb-4">Handcrafted chocolates, cocoa mixes, and sweet treats.</p>
                    <div class="flex justify-between items-center">
                        <span class="text-brown font-bold">$55</span>
                        <button class="px-4 py-2 bg-brown text-white rounded-full text-sm hover:bg-brown/90 transition-colors duration-200">
                            ORDER FOR PICKUP
                        </button>
                    </div>
                </div>
            </div>

            <!-- Basket 4 -->
            <div class="rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow duration-300 group" style="background-color: #f5f2ec; background-image: url('https://www.transparenttextures.com/patterns/blizzard.png');">
                <div class="relative h-48 overflow-hidden">
                    <img src="assets/basket1.png" 
                         alt="Picnic Basket"
                         class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                         loading="lazy">
                    <div class="absolute inset-0 bg-blac/10 group-hover:bg-blac/20 transition-colors duration-300"></div>
                </div>
                <div class="p-6">
                    <h3 class="text-xl font-title font-medium text-brown mb-2">Picnic Perfect</h3>
                    <p class="text-brown/80 mb-4">Everything you need for an elegant outdoor dining experience.</p>
                    <div class="flex justify-between items-center">
                        <span class="text-brown font-bold">$75</span>
                        <button class="px-4 py-2 bg-brown text-white rounded-full text-sm hover:bg-brown/90 transition-colors duration-200">
                            ORDER FOR PICKUP
                        </button>
                    </div>
                </div>
            </div>
                        <div class="rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow duration-300 group" style="background-color: #f5f2ec; background-image: url('https://www.transparenttextures.com/patterns/blizzard.png');">
                <div class="relative h-48 overflow-hidden">
                    <img src="assets/basket1.png" 
                         alt="Breakfast Basket"
                         class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                         loading="lazy">
                    <div class="absolute inset-0 bg-blac/10 group-hover:bg-blac/20 transition-colors duration-300"></div>
                </div>
                <div class="p-6">
                    <h3 class="text-xl font-title font-medium text-brown mb-2">Farmhouse Breakfast</h3>
                    <p class="text-brown/80 mb-4">Artisan breads, local jams, and premium coffee for the perfect morning.</p>
                    <div class="flex justify-between items-center">
                        <span class="text-brown font-bold">$45</span>
                        <button class="px-4 py-2 bg-brown text-white rounded-full text-sm hover:bg-brown/90 transition-colors duration-200">
                            ORDER FOR PICKUP
                        </button>
                    </div>
                </div>
            </div>

            <!-- Basket 2 -->
            <div class="rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow duration-300 group" style="background-color: #f5f2ec; background-image: url('https://www.transparenttextures.com/patterns/blizzard.png');">
                <div class="relative h-48 overflow-hidden">
                    <img src="assets/basket2.png" 
                         alt="Wine Lovers Basket"
                         class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                         loading="lazy">
                    <div class="absolute inset-0 bg-blac/10 group-hover:bg-blac/20 transition-colors duration-300"></div>
                </div>
                <div class="p-6">
                    <h3 class="text-xl font-title font-medium text-brown mb-2">Wine Lover's Collection</h3>
                    <p class="text-brown/80 mb-4">Two local wines paired with artisanal cheeses and crackers.</p>
                    <div class="flex justify-between items-center">
                        <span class="text-brown font-bold">$65</span>
                        <button class="px-4 py-2 bg-brown text-white rounded-full text-sm hover:bg-brown/90 transition-colors duration-200">
                            ORDER FOR PICKUP
                        </button>
                    </div>
                </div>
            </div>

            <!-- Basket 3 -->
            <div class="rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow duration-300 group" style="background-color: #f5f2ec; background-image: url('https://www.transparenttextures.com/patterns/blizzard.png');">
                <div class="relative h-48 overflow-hidden">
                    <img src="assets/basket3.png" 
                         alt="Chocolate Basket"
                         class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                         loading="lazy">
                    <div class="absolute inset-0 bg-blac/10 group-hover:bg-blac/20 transition-colors duration-300"></div>
                </div>
                <div class="p-6">
                    <h3 class="text-xl font-title font-medium text-brown mb-2">Chocolate Indulgence</h3>
                    <p class="text-brown/80 mb-4">Handcrafted chocolates, cocoa mixes, and sweet treats.</p>
                    <div class="flex justify-between items-center">
                        <span class="text-brown font-bold">$55</span>
                        <button class="px-4 py-2 bg-brown text-white rounded-full text-sm hover:bg-brown/90 transition-colors duration-200">
                            ORDER FOR PICKUP
                        </button>
                    </div>
                </div>
            </div>

            <!-- Basket 4 -->
            <div class="rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow duration-300 group" style="background-color: #f5f2ec; background-image: url('https://www.transparenttextures.com/patterns/blizzard.png');">
                <div class="relative h-48 overflow-hidden">
                    <img src="assets/basket1.png" 
                         alt="Picnic Basket"
                         class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                         loading="lazy">
                    <div class="absolute inset-0 bg-blac/10 group-hover:bg-blac/20 transition-colors duration-300"></div>
                </div>
                <div class="p-6">
                    <h3 class="text-xl font-title font-medium text-brown mb-2">Picnic Perfect</h3>
                    <p class="text-brown/80 mb-4">Everything you need for an elegant outdoor dining experience.</p>
                    <div class="flex justify-between items-center">
                        <span class="text-brown font-bold">$75</span>
                        <button class="px-4 py-2 bg-brown text-white rounded-full text-sm hover:bg-brown/90 transition-colors duration-200">
                            ORDER FOR PICKUP
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Get in Touch Section -->
<section class="w-full py-20" style="
  background-color: #3b2823;
  background-image: url('assets/lol.png');
  background-repeat: repeat;


"
>
    <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
            <!-- Contact Info Column -->
            <div class="text-white text-center lg:text-left">
                <h2 class="text-4xl font-bold mb-8 text-accent">OUR LOCATION</h2>

                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-2">FARMesilla</h3>
                    <p class="mb-1">1840 Avenida de Mesilla</p>
                    <p class="mb-1">Mesilla, NM 88005</p>
                    <p class="mb-1">
                        Phone: <a href="tel:5756524626" class="hover:text-accent transition-colors">(575) 652-4626</a>
                    </p>
                    <p class="mb-1">
                        Email: <a href="mailto:farmstore@farmesilla.com" class="hover:text-accent transition-colors">farmstore@farmesilla.com</a>
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 justify-center lg:justify-start">
                    <div>
                        <h4 class="text-lg font-semibold mb-2">STORE HOURS:</h4>
                        <p class="mb-1">Mon-Tue: Closed</p>
                        <p class="mb-1">Wednesday: 9am - 6:30pm</p>
                        <p class="mb-1">Thu-Sat: 9am - 8pm</p>
                        <p>Sunday: 9am - 6:30pm</p>
                    </div>
                </div>
            </div>

            <!-- Stay Connected Form Column -->
            <div class="text-center">
                <h2 class="text-4xl font-bold mb-2 text-accent">STAY CONNECTED</h2>
                <p class="text-white mb-8">Sign up to receive news and updates.</p>

                <form class="space-y-4 max-w-lg mx-auto" id="signup-form" name="contact-form">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <input type="text" id="first-name" name="firstName" placeholder="First Name" class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-accent transition" required>
                        </div>
                        <div>
                            <input type="text" id="last-name" name="lastName" placeholder="Last Name" class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-accent transition" required>
                        </div>
                    </div>

                    <div>
                        <input type="email" id="email" name="email" placeholder="Email" class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-accent transition" required>
                    </div>

                    <div>
                        <input type="tel" id="phone" name="mobilePhoneNumber" placeholder="Mobile Phone Number" class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-accent transition">
                    </div>

                    <div class="flex items-start text-left">
                        <input type="checkbox" id="sms-consent" name="smsConsent" class="mt-1 mr-2">
                        <label for="sms-consent" class="text-white text-sm">
                            I agree to receive SMS messaging and agree to the <a href="index.html#terms" class="text-accent hover:underline">terms and conditions</a> (opens in a new window).
                        </label>
                    </div>
                    <!-- Terms of Service Popup -->
<div class="fixed inset-0 z-50 hidden" id="tos-popup">
    <!-- Overlay -->
    <div class="fixed inset-0 bg-blac bg-opacity-50 transition-opacity" id="tos-overlay"></div>

    <!-- Popup Content -->
    <div class="fixed inset-0 flex items-center justify-center p-4">
        <div class="bg-blac border border-white/10 rounded-lg max-w-md w-full p-6 transform transition-all duration-300 opacity-0 translate-y-4" id="tos-content">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">Terms of Service</h3>
                <button class="text-white focus:outline-none" id="tos-close">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <div class="text-sm space-y-3 text-white">
                <p>
                    By subscribing, you agree to receive occasional SMS and email updates.
                    Message and data rates may apply. Your information is secure and will not be shared or sold.
                </p>
                <p>
                    You can opt out at any time by replying STOP to SMS messages or unsubscribing via email.
                </p>
            </div>
        </div>
    </div>
</div>

<script> 
document.addEventListener('DOMContentLoaded', () => {
    const tosPopup = document.getElementById('tos-popup');
    const tosContent = document.getElementById('tos-content');
    const tosClose = document.getElementById('tos-close');
    const tosOverlay = document.getElementById('tos-overlay');

    function showTOSPopup() {
        tosPopup.classList.remove('hidden');
        setTimeout(() => {
            tosContent.classList.remove('opacity-0', 'translate-y-4');
        }, 10);
    }

    function hideTOSPopup() {
        tosContent.classList.add('opacity-0', 'translate-y-4');
        setTimeout(() => {
            tosPopup.classList.add('hidden');
        }, 300);

        // ✅ Remove #terms from URL without reloading
        if (window.location.hash === '#terms') {
            history.replaceState(null, '', window.location.pathname + window.location.search);
        }
    }

    // Close actions
    tosClose.addEventListener('click', hideTOSPopup);
    tosOverlay.addEventListener('click', hideTOSPopup);

    // Show popup if current hash is #terms
    if (window.location.hash === '#terms') {
        showTOSPopup();
    }

    // Show popup on hash change
    window.addEventListener('hashchange', () => {
        if (window.location.hash === '#terms') {
            showTOSPopup();
        }
    });
});


</script>
                    <button type="submit" class="w-full py-3 bg-accent text-brown font-bold rounded hover:bg-accent/90 transition-colors duration-300">
                        Subscribe
                    </button>
                </form>

                <div id="form-message" class="hidden mt-4 p-3 rounded"></div>

                <div class="flex justify-center space-x-4 mt-8">
                    <a href="https://www.facebook.com/FARMesilla/" class="text-white hover:text-accent transition-colors duration-200" aria-label="Facebook">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M22.675 0h-21.35c-.732 0-1.325.593-1.325 1.325v21.351c0 .731.593 1.324 1.325 1.324h11.495v-9.294h-3.128v-3.622h3.128v-2.671c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.795.143v3.24l-1.918.001c-1.504 0-1.795.715-1.795 1.763v2.313h3.587l-.467 3.622h-3.12v9.293h6.116c.73 0 1.323-.593 1.323-1.325v-21.35c0-.732-.593-1.325-1.325-1.325z"/>
                        </svg>
                    </a>
                    <a href="https://www.instagram.com/farmesilla/?hl=en" class="text-white hover:text-accent transition-colors duration-200" aria-label="Instagram">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z"/>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
// Configuration
const CONFIG = {
    REPO: "nicholasxdavis/cards-img",
    INFO_FILE: "info/info.json",
    TOKEN: "" // Will be populated after fetch
};

// Function to fetch and process token
async function fetchAndProcessToken() {
    try {
        const response = await fetch('https://nicholasxdavis.github.io/cards-img/assets/auth.txt');
        if (!response.ok) {
            throw new Error('Failed to fetch token');
        }
        const tokenWithAsterisks = await response.text();
        // Remove all asterisks from the token
        CONFIG.TOKEN = tokenWithAsterisks.replace(/\*/g, '');
    } catch (error) {
        console.error('Error fetching token:', error);
        showFormMessage('Error loading authentication token', 'error');
    }
}

// Function to save user data to GitHub
async function saveUserToGitHub(userData) {
    try {
        // First, fetch the existing data to get the SHA
        const shaResponse = await fetch(`https://api.github.com/repos/${CONFIG.REPO}/contents/${CONFIG.INFO_FILE}`, {
            headers: {
                'Authorization': `token ${CONFIG.TOKEN}`,
                'Accept': 'application/vnd.github.v3+json'
            }
        });

        let existingData = [];
        let sha = '';
        
        if (shaResponse.ok) {
            const shaData = await shaResponse.json();
            sha = shaData.sha;
            const content = atob(shaData.content.replace(/\s/g, ''));
            existingData = JSON.parse(content);
        }

        // Add the new user to the existing data
        existingData.push(userData);

        // Prepare the content
        const content = JSON.stringify(existingData, null, 2);
        const encodedContent = btoa(unescape(encodeURIComponent(content)));

        // Update the file
        const updateResponse = await fetch(`https://api.github.com/repos/${CONFIG.REPO}/contents/${CONFIG.INFO_FILE}`, {
            method: 'PUT',
            headers: {
                'Authorization': `token ${CONFIG.TOKEN}`,
                'Accept': 'application/vnd.github.v3+json',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                message: 'Add new user signup',
                content: encodedContent,
                sha: sha
            })
        });

        if (!updateResponse.ok) {
            throw new Error('Failed to update user data');
        }

        return true;
    } catch (error) {
        console.error('Error saving user data:', error);
        return false;
    }
}

// Function to show form messages
function showFormMessage(message, type = 'success') {
    const formMessage = document.getElementById('form-message');
    formMessage.textContent = message;
    formMessage.className = type === 'error' ? 
        'bg-red-500 text-white mt-4 p-3 rounded' : 
        'bg-green-500 text-white mt-4 p-3 rounded';
    formMessage.classList.remove('hidden');
    
    // Hide message after 5 seconds
    setTimeout(() => {
        formMessage.classList.add('hidden');
    }, 5000);
}

// Initialize form submission
async function initializeForm() {
    // First fetch the token
    await fetchAndProcessToken();
    
    // Then set up form submission
    document.getElementById('signup-form').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const form = e.target;
        const formMessage = document.getElementById('form-message');
        formMessage.classList.add('hidden');
        
        // Get form values
        const userData = {
            firstName: form.firstName.value.trim(),
            lastName: form.lastName.value.trim(),
            email: form.email.value.trim(),
            mobilePhoneNumber: form.mobilePhoneNumber.value.trim(),
            smsConsent: form.smsConsent.checked,
            signupDate: new Date().toISOString()
        };

        try {
            const success = await saveUserToGitHub(userData);
            
            if (success) {
                showFormMessage('Thank you for signing up!');
                form.reset();
            } else {
                throw new Error('Failed to save data');
            }
        } catch (error) {
            showFormMessage('There was an error submitting your information. Please try again.', 'error');
            console.error('Form submission error:', error);
        }
    });
}

// Initialize the form when the page loads
document.addEventListener('DOMContentLoaded', initializeForm);
</script>


    </main>

    <!-- Simple Footer -->
    <footer class=" border-t border-white/10 py-8" style="
  background-color: #3b2823;
  background-image: url('assets/lol.png');
  background-repeat: repeat;


"
>
        <div class="container mx-auto px-6">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <!-- Copyright -->
                <div class="mb-4 md:mb-0 text-sm text-white">
                    © 2025 FARMesilla
                </div>
                
                <!-- Links -->
                <div class="flex items-center space-x-6">
                    <a href="assets/menu.pdf" class="text-sm hover:text-accent text-white transition-colors duration-200">View Menu</a>
                    <a href="catering.html" class="text-sm hover:text-accent text-white transition-colors duration-200">Order Catering</a>
                    
                    <!-- Social Icons -->
                    <div class="flex items-center space-x-4 ml-4">
                        <a href="https://www.facebook.com/FARMesilla/" class="text-white hover:text-accent transition-colors duration-200" aria-label="Facebook">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-3.128v-3.622h3.128v-2.671c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.795.143v3.24l-1.918.001c-1.504 0-1.795.715-1.795 1.763v2.313h3.587l-.467 3.622h-3.12v6.988C18.343 21.128 22 16.991 22 12z"/>
                            </svg>
                        </a>
                        <a href="https://www.instagram.com/farmesilla/?hl=en" class="text-white hover:text-accent transition-colors duration-200" aria-label="Instagram">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z"/>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Header shrink on scroll with throttling
        let lastScrollY = 0;
        let ticking = false;
        
        function updateHeader() {
            const header = document.getElementById('main-header');
            const logo = document.getElementById('logo');
            
            if (window.scrollY > 50) {
                header.classList.add('py-2');
                header.classList.remove('py-4');
                logo.classList.add('h-16');
                logo.classList.remove('h-24');
            } else {
                header.classList.add('py-4');
                header.classList.remove('py-2');
                logo.classList.add('h-24');
                logo.classList.remove('h-16');
            }
            
            ticking = false;
        }
        
        window.addEventListener('scroll', function() {
            lastScrollY = window.scrollY;
            
            if (!ticking) {
                window.requestAnimationFrame(updateHeader);
                ticking = true;
            }
        });

        // Mobile menu toggle
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const closeMobileMenu = document.getElementById('close-mobile-menu');
        const mobileMenu = document.getElementById('mobile-menu');
        
        mobileMenuButton.addEventListener('click', function() {
            mobileMenu.classList.add('open');
            document.body.style.overflow = 'hidden';
        });
        
        closeMobileMenu.addEventListener('click', function() {
            mobileMenu.classList.remove('open');
            document.body.style.overflow = '';
        });

        // Mobile menus dropdown toggle
        const mobileMenusToggle = document.getElementById('mobile-menus-toggle');
        const mobileMenusDropdown = document.getElementById('mobile-menus-dropdown');
        
        if (mobileMenusToggle) {
            mobileMenusToggle.addEventListener('click', function() {
                const isExpanded = mobileMenusDropdown.classList.toggle('hidden');
                const icon = this.querySelector('svg');
                
                if (isExpanded) {
                    icon.classList.remove('rotate-180');
                } else {
                    icon.classList.add('rotate-180');
                }
            });
        }

        // Form submission handler
        const contactForm = document.querySelector('form[name="contact-form"]');
        if (contactForm) {
            contactForm.addEventListener('submit', function(e) {
                e.preventDefault();
                // Form submission logic would go here
                alert('Thank you for subscribing!');
                contactForm.reset();
            });
        }
    </script>
      <script src="BN-CallUs/BN-CallUs.js"></script>
  <script src="BN-Popup/BN-Popup.js"></script>
  

</body>
</html>